<div class="login-container">
  <div class="row g-0 h-100">
    <!-- Partie gauche avec l'image -->
    <div class="col-lg-6 d-none d-lg-block login-image">
      <div class="login-image-overlay">
        <div class="login-image-content">
          <div class="text-center">
            <img src="assets/img/kaiadmin/logo.png" alt="GestPro" class="login-logo">
          </div>
          <h2 class="display-4 fw-bold text-white mb-4">Bienvenue sur <span class="text-highlight">GestPro</span></h2>
          <p class="lead text-white-80 mb-5">La plateforme complète pour gérer efficacement vos projets de développement</p>
        </div>
      </div>
    </div>
    
    <!-- Partie droite avec le formulaire -->
    <div class="col-lg-6 login-form-container">
      <div class="login-form-content">
        <div class="d-lg-none text-center mb-5">
          <img src="assets/img/kaiadmin/logo.png" alt="GestPro" class="login-logo-sm">
        </div>
        
        <div class="text-center mb-4">
          <h3 class="fw-bold">Connexion</h3>
          <p class="text-muted">Veuillez vous connecter pour accéder à votre espace</p>
        </div>
        
        <form novalidate [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          @if (error) {
            <div class="col-12">
              <div class="alert alert-danger">{{ error }}</div>
            </div>
          }
          <div class="form-group mb-4">
            <label for="email" class="form-label">Adresse Email</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-envelope"></i></span>
              <input 
                type="email" 
                class="form-control form-control-lg" 
                id="email" 
                placeholder="Votre adresse email" 
                formControlName="email"
                [ngClass]="{'is-invalid': submitted && f['email'].errors}"
              >
            </div>
            @if(submitted && f['email'].errors) {
              <div class="invalid-feedback d-block">
                @if(f['email'].errors['required']) {
                  <span>L'email est requis</span>
                }
                @if(f['email'].errors['email']) {
                  <span>Format d'email invalide</span>
                }
              </div>
            }
          </div>
          
          <div class="form-group mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <label for="password" class="form-label mb-0">Mot de passe</label>
              <a href="#" class="forgot-password">Mot de passe oublié ?</a>
            </div>
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-lock"></i></span>
              <input 
                [type]="showPassword ? 'text' : 'password'" 
                class="form-control form-control-lg" 
                id="password" 
                placeholder="Votre mot de passe" 
                formControlName="password"
                [ngClass]="{'is-invalid': submitted && f['password'].errors}"
              >
              <button 
                class="input-group-text password-toggle" 
                type="button"
                (click)="togglePasswordVisibility()"
              >
                <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
              </button>
            </div>
            @if(submitted && f['password'].errors) {
              <div class="invalid-feedback d-block">
                @if(f['password'].errors['required']) {
                  <span>Le mot de passe est requis</span>
                }
                @if(f['password'].errors['minlength']) {
                  <span>Le mot de passe doit contenir au moins 6 caractères</span>
                }
              </div>
            }
          </div>
          
          <div class="form-group">
            <button 
              type="submit" 
              class="btn btn-primary btn-lg w-100"
            >
              <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              <span *ngIf="!isLoading"><i class="fas fa-sign-in-alt me-2"></i></span>
              Se connecter
            </button>
          </div>
        </form>
        
        <div class="text-center mt-4">
          <p class="mb-0">Vous n'avez pas de compte ? <a routerLink="/register" class="register-link">Inscrivez-vous</a></p>
        </div>
        
        <div class="login-footer text-center mt-5">
          <p class="text-muted mb-0">&copy; 2025 GestPro. Tous droits réservés.</p>
        </div>
      </div>
    </div>
  </div>
</div>
