<!-- Header avec navbar -->
<header class="main-header">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="#">
        <img src="assets/img/kaiadmin/logo.png" alt="GestPro" width="140">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarMain">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" routerLink="/">Accueil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="#">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="#">À propos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="#">Contact</a>
          </li>
          <li class="nav-item ms-lg-3">
            <a class="btn btn-outline-light" routerLink="/login">Connexion</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<!-- Section Hero avec image de fond -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center min-vh-75">
      <div class="col-lg-8 mx-auto text-center">
        <h1 class="hero-title">Gestion de Projets Simplifiée</h1>
        <p class="hero-subtitle">Une plateforme complète pour gérer efficacement vos projets de développement, du concept à la réalisation.</p>
        <div class="hero-cta mt-4">
          <a href="#inscription" class="btn btn-primary btn-lg me-3" (click)="scrollToInscription($event)">Soumettre votre projet</a>
          <a routerLink="#" class="btn btn-outline-light btn-lg">En savoir plus</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Section Inscription avec formulaire -->
<section id="inscription" class="inscription-section">
  <div class="container">
    <div class="row text-center">
      <div class="col-12">
        <h2 class="section-title">Soumettez votre projet</h2>
        <p class="section-subtitle">Remplissez le formulaire ci-dessous pour soumettre votre projet et bénéficier d'un accompagnement personnalisé</p>
      </div>
    </div>
    
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="form-container">
          <div class="form-header">
            <h4 class="mb-0"><i class="fas fa-clipboard-list me-2"></i> Formulaire d'Inscription</h4>
          </div>
          <form novalidate [formGroup]="inscriptionForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
            <div class="submit-msg-success">
              @if (successMessage) {
                <div class="alert alert-success">
                  <span class="text-success fw-bold">Succès!</span> Votre projet a été soumis avec succès.
                </div>
              }
            </div>
            <!-- Informations personnelles -->
            <div class="row">
              <div class="col-12 mb-3">
                <h5 class="form-section-title"><i class="fas fa-user me-2"></i> Informations personnelles</h5>
              </div>
              
              <div class="col-md-6 form-group">
                <label for="nom" class="form-label">Nom <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="nom" 
                  placeholder="Entrez votre nom"
                  formControlName="nom"
                  [ngClass]="{'is-invalid': submitted && f['nom'].errors}"
                >
                @if (submitted && f['nom'].errors) {
                  <div class="invalid-feedback">
                    @if (f['nom'].errors['required']) {
                      <span>Le nom est requis</span>
                    }
                  </div>
                }
              </div>
              
              <div class="col-md-6 form-group">
                <label for="prenom" class="form-label">Prénom(s) <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="prenom" 
                  placeholder="Entrez votre prénom"
                  formControlName="prenoms"
                  [ngClass]="{'is-invalid': submitted && f['prenoms'].errors}"
                >
                @if (submitted && f['prenoms'].errors) {
                  <div class="invalid-feedback">
                    @if (f['prenoms'].errors['required']) {
                      <span>Le prénom(s) est requis</span>
                    }
                  </div>
                }
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-4 form-group">
                <label for="dateNaissance" class="form-label">Date de Naissance <span class="text-danger">*</span></label>
                <input 
                  type="date" 
                  class="form-control" 
                  id="dateNaissance" 
                  formControlName="date_naissance"
                  [ngClass]="{'is-invalid': submitted && f['date_naissance'].errors}"
                >
                @if (submitted && f['date_naissance'].errors) {
                  <div class="invalid-feedback">
                    @if (f['date_naissance'].errors['required']) {
                      <span>La date de naissance est requise</span>
                    }
                  </div>
                }
              </div>
              
              <div class="col-md-4 form-group">
                <label for="lieuNaissance" class="form-label">Lieu de Naissance <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="lieuNaissance" 
                  placeholder="Entrez votre lieu de naissance"
                  formControlName="lieu_naissance"
                  [ngClass]="{'is-invalid': submitted && f['lieu_naissance'].errors}"
                >
                @if (submitted && f['lieu_naissance'].errors) {
                  <div class="invalid-feedback">
                    @if (f['lieu_naissance'].errors['required']) {
                      <span>Le lieu de naissance est requis</span>
                    }
                  </div>
                }
              </div>
              <div class="col-md-4 form-group">
                <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                <input 
                  type="email" 
                  class="form-control" 
                  id="email" 
                  placeholder="Entrez votre email"
                  formControlName="email"
                  [ngClass]="{'is-invalid': submitted && f['email'].errors}"
                >
                @if (submitted && f['email'].errors) {
                  <div class="invalid-feedback">
                    @if (f['email'].errors['required']) {
                      <span>L'email est requis</span>
                    }
                    @if (f['email'].errors['email']) {
                      <span>L'email est invalide</span>
                    }
                  </div>
                }
              </div>
            </div>

            <!-- Informations du projet -->
            <div class="row">
              <div class="col-12 mb-3">
                <h5 class="form-section-title"><i class="fas fa-project-diagram me-2"></i> Informations du projet</h5>
              </div>
              
              <div class="col-md-6 form-group">
                <label for="typeProjet" class="form-label">Type de Projet <span class="text-danger">*</span></label>
                <select 
                  class="form-select" 
                  id="typeProjet" 
                  formControlName="type_projet"
                  [ngClass]="{'is-invalid': submitted && f['type_projet'].errors}"
                >
                  <option value="" disabled selected>Sélectionnez le type de projet</option>
                  <option value="En Développement">En Développement</option>
                  <option value="En Création">En Création</option>
                </select>
                @if (submitted && f['type_projet'].errors) {
                  <div class="invalid-feedback">
                    @if (f['type_projet'].errors['required']) {
                      <span>Le type de projet est requis</span>
                    }
                  </div>
                }
              </div>
              
              <div class="col-md-6 form-group">
                <label for="forme_juridique" class="form-label">Forme Juridique <span class="text-danger">*</span></label>
                <select 
                  class="form-select" 
                  id="forme_juridique" 
                  formControlName="forme_juridique"
                  [ngClass]="{'is-invalid': submitted && f['forme_juridique'].errors}"
                >
                  <option value="" disabled selected>Sélectionnez la forme juridique</option>
                  <option *ngFor="let forme of formesJuridiques" [value]="forme">{{ forme }}</option>
                </select>
                @if (submitted && f['forme_juridique'].errors) {
                  <div class="invalid-feedback">
                    @if (f['forme_juridique'].errors['required']) {
                      <span>La forme juridique est requise</span>
                    }
                  </div>
                }
              </div>
            </div>

            <div class="row mb-4">
              <div class="col-md-12 form-group">
                <label for="numeroCNI" class="form-label">Numéro de CNI <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="numeroCNI" 
                  placeholder="Entrez votre numéro CNI"
                  formControlName="num_cni"
                  [ngClass]="{'is-invalid': submitted && f['num_cni'].errors}"
                >
                @if (submitted && f['num_cni'].errors) {
                  <div class="invalid-feedback">
                    @if (f['num_cni'].errors['required']) {
                      <span>Le numéro CNI est requis</span>
                    }
                  </div>
                }
              </div>
            </div>

            <!-- Documents requis -->
            <div class="row mb-4">
              <div class="col-12 mb-3">
                <h5 class="form-section-title"><i class="fas fa-file-upload me-2"></i> Documents requis</h5>
                <p class="form-section-desc">Veuillez joindre les documents suivants pour compléter votre inscription</p>
              </div>
              
              <div class="col-md-4 form-group">
                <label for="cni" class="form-label">Joindre CNI <span class="text-danger">*</span></label>
                <input 
                  type="file" 
                  class="form-control" 
                  id="cni" 
                  (change)="onFileChange($event, 'cni')"
                  [ngClass]="{'is-invalid': submitted && f['cni'].errors}"
                >
                @if (submitted && f['cni'].errors) {
                  <div class="invalid-feedback">
                    @if (f['cni'].errors['required']) {
                      <span>Le fichier CNI est requis</span>
                    }
                  </div>
                }
                @if (inscriptionForm.get('cni')?.errors?.['invalidFileType']) {
                  <div class="text-danger">Format de fichier non valide</div>
                }
                @if (inscriptionForm.get('cni')?.errors?.['invalidFileSize']) {
                  <div class="text-danger">Taille du fichier trop grande</div>
                }
                <small class="form-text text-muted">Formats acceptés: PDF, JPEG, JPG, PNG (Max: 1 Mo)</small>
              </div>

              <div class="col-md-4 form-group">
                <label for="piece_identite" class="form-label">Joindre Pièce d'Identité <span class="text-danger">*</span></label>
                <input 
                  type="file" 
                  class="form-control" 
                  id="piece_identite" 
                  (change)="onFileChange($event, 'piece_identite')"
                  [ngClass]="{'is-invalid': submitted && f['piece_identite'].errors}"
                >
                @if (submitted && f['piece_identite'].errors) {
                  <div class="invalid-feedback">
                    @if (f['piece_identite'].errors['required']) {
                      <span>La pièce d'identité est requise</span>
                    }
                  </div>
                }
                @if (inscriptionForm.get('piece_identite')?.errors?.['invalidFileType']) {
                  <div class="text-danger">Format de fichier non valide</div>
                }
                @if (inscriptionForm.get('piece_identite')?.errors?.['invalidFileSize']) {
                  <div class="text-danger">Taille du fichier trop grande</div>
                }
                <small class="form-text text-muted">Formats acceptés: PDF, JPEG, JPG, PNG (Max: 1 Mo)</small>
              </div>

              <div class="col-md-4 form-group">
                <label for="plan_affaire" class="form-label">Joindre Plan d'Affaires <span class="text-danger">*</span></label>
                <input 
                  type="file" 
                  class="form-control" 
                  id="plan_affaire" 
                  (change)="onFileChange($event, 'plan_affaire')"
                  [ngClass]="{'is-invalid': submitted && f['plan_affaire'].errors}"
                >
                @if (submitted && f['plan_affaire'].errors) {
                  <div class="invalid-feedback">
                    @if (f['plan_affaire'].errors['required']) {
                      <span>Le plan d'affaires est requis</span>
                    }
                  </div>
                }
                @if (inscriptionForm.get('plan_affaire')?.errors?.['invalidFileType']) {
                  <div class="text-danger">Format de fichier non valide</div>
                }
                @if (inscriptionForm.get('plan_affaire')?.errors?.['invalidFileSize']) {
                  <div class="text-danger">Taille du fichier trop grande</div>
                }
                <small class="form-text text-muted">Formats acceptés: PDF (Max: 1 Mo)</small>
              </div>
            </div>

            <div class="submit-section">
              <p class="text-muted mb-4">En soumettant ce formulaire, vous acceptez nos conditions d'utilisation et notre politique de confidentialité.</p>
              <button type="submit" class="btn btn-primary btn-lg">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                <span *ngIf="!isLoading"><i class="fas fa-paper-plane me-2"></i></span>
                Soumettre mon projet
              </button>
            </div>
            @if (error) {
              <div class="mt-4 col-12">
                <div class="alert alert-danger">{{ error }}</div>
              </div>
            }
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Pied de page -->
<footer class="footer">
  <div class="container">
    <div class="row py-4 border-top border-light">
      <div class="col-md-4 mb-4 mb-md-0">
        <h5 class="text-white mb-3">GestPro</h5>
        <p class="text-light mb-0">La plateforme idéale pour la gestion de vos projets de développement, offrant un suivi complet et personnalisé.</p>
      </div>
      <div class="col-md-3 mb-4 mb-md-0">
        <h5 class="text-white mb-3">Liens rapides</h5>
        <ul class="list-unstyled footer-links">
          <li><a href="#">Accueil</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="#">À propos</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
      <div class="col-md-5">
        <h5 class="text-white mb-3">Contactez-nous</h5>
        <p class="text-light mb-2"><i class="fas fa-map-marker-alt me-2"></i> Abidjan, Côte d'Ivoire</p>
        <p class="text-light mb-2"><i class="fas fa-phone me-2"></i> +225 07 00 00 00 00</p>
        <p class="text-light mb-0"><i class="fas fa-envelope me-2"></i> contact&#64;gestpro.com</p>
        <div class="social-icons mt-3">
          <a routerLink="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
          <a routerLink="#" class="social-icon"><i class="fab fa-twitter"></i></a>
          <a routerLink="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
          <a routerLink="#" class="social-icon"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="row py-3 copyright">
      <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
        <p class="text-light mb-0">&copy; {{ dateNow.getFullYear() }} GestPro. Tous droits réservés.</p>
        </div>
    </div>
  </div>
</footer>